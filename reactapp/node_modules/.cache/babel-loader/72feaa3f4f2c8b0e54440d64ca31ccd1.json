{"ast":null,"code":"var _jsxFileName = \"/Users/syl/Desktop/La Capsule/Semaine 5/mymoviesBackEnd/reactapp/src/App.js\",\n    _s = $RefreshSig$();\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport React, { useState, useEffect } from 'react';\nimport { Container, Row, Col } from 'reactstrap';\nimport { Nav, NavItem, NavLink } from 'reactstrap';\nimport { Movie } from '../src/Components/Movie';\nimport { MovieRest } from '../src/Components/MovieRest';\nimport { Button, Popover, PopoverHeader, PopoverBody } from 'reactstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar icon = {\n  width: '52px'\n};\nvar flex = {\n  display: 'flex',\n  flexDirection: 'row',\n  alignItems: 'center'\n};\nvar nav = {\n  fontSize: '18px',\n  fontWeight: 'bold',\n  color: 'white'\n};\nvar list = {\n  fontSize: '18px',\n  padding: \"8px 10px\"\n};\n\nfunction App() {\n  _s();\n\n  const [movieListAPI, setMovieListAPI] = useState([]);\n  const [wishList, setWishList] = useState([]);\n  const [popoverOpen, setPopoverOpen] = useState(false);\n\n  const toggle = () => setPopoverOpen(!popoverOpen);\n\n  useEffect(async () => {\n    var rawResponse = await fetch('/new-movies');\n    var reponse = await rawResponse.json();\n    setMovieListAPI(reponse.moviesAPI.results);\n  }, []);\n  useEffect(async () => {\n    var rawResponse = await fetch('/wishlist-movie');\n    var response = await rawResponse.json();\n    setWishList(response.movies);\n  }, []);\n  var movieData = movieListAPI.map((list, i) => {\n    return list;\n  }); // tri des films par popularité\n\n  movieData.sort(function (a, b) {\n    return b.vote_average - a.vote_average;\n  }); ////\n  // sépare les films en 1,2,3 puis le reste\n\n  var movieDataFirst = [];\n  var movieDataRest = [];\n  movieDataFirst = movieData.filter((movie, idx) => idx < 3);\n  movieDataRest = movieData.filter((movie, idx) => idx > 3); ///\n  ///Ajout dans WishList\n\n  var clickSurLike = async (nomDuFilm, afficheMovie) => {\n    var wishListExist = wishList.map((exist, i) => {\n      return exist.Nom;\n    });\n\n    if (wishListExist.indexOf(nomDuFilm) === -1) {\n      setWishList([...wishList, {\n        Nom: nomDuFilm,\n        img: afficheMovie\n      }]);\n      await fetch('/wishlist-movie', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: 'name=' + nomDuFilm + '&img=' + afficheMovie\n      });\n    } else if (wishListExist.indexOf(nomDuFilm) !== -1) {\n      setWishList(wishList.filter(e => e.Nom !== nomDuFilm));\n      await fetch('/wishlist-movie/' + nomDuFilm, {\n        method: 'DELETE'\n      });\n    }\n    /*          var rawResponse = await fetch('/wishlist-movie');\n            var response = await rawResponse.json();\n            setWishList(response.movies) */\n\n  }; //////\n  // Suprresion depuis WIshList\n\n\n  var removeWishList = async nomDuFilm => {\n    setWishList(wishList.filter(e => e.name !== nomDuFilm));\n    await fetch('/wishlist-movie/' + nomDuFilm, {\n      method: 'DELETE'\n    });\n    var rawResponse = await fetch('/wishlist-movie');\n    var response = await rawResponse.json();\n    setWishList(response.movies);\n  }; ///\n  /// creation de la div WishList\n\n\n  var favListComp = wishList.map((movielist, i) => {\n    return /*#__PURE__*/_jsxDEV(PopoverBody, {\n      className: \"wishList\",\n      onClick: () => removeWishList(movielist.Nom),\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"wishListImage\",\n        src: movielist.img\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 99\n      }, this), movielist.Nom]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 16\n    }, this);\n  }); //////\n  /// recup etatLike\n  ////\n  /// creation des Cards Movies123 et MoviesRest\n\n  var movieListFirst = movieDataFirst.map((oneMovie, i) => {\n    var wishListExist = wishList.map((exist, i) => {\n      return exist.Nom;\n    });\n    var isLike = wishListExist.indexOf(oneMovie.nameMovie);\n\n    if (oneMovie.title.length > 22) {\n      return /*#__PURE__*/_jsxDEV(Movie, {\n        booleanLike: isLike,\n        nivAvis: oneMovie.Avis,\n        nivMoyenne: oneMovie.vote_average,\n        nbreVote: oneMovie.vote_count,\n        nameMovie: oneMovie.title.slice(0, 22) + \"...\",\n        affiche: 'https://image.tmdb.org/t/p/w500' + oneMovie.poster_path,\n        resume: oneMovie.overview.slice(0, 350) + \"...\",\n        like: clickSurLike\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(Movie, {\n        booleanLike: islike,\n        nivAvis: oneMovie.Avis,\n        nivMoyenne: oneMovie.vote_average,\n        nbreVote: oneMovie.vote_count,\n        nameMovie: oneMovie.title,\n        affiche: 'https://image.tmdb.org/t/p/w500' + oneMovie.poster_path,\n        resume: oneMovie.overview.slice(0, 350) + \"...\",\n        like: clickSurLike\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 14\n      }, this);\n    }\n  });\n  var movieListRest = movieDataRest.map((oneMovie, i) => {\n    if (oneMovie.title.length > 22) {\n      return /*#__PURE__*/_jsxDEV(MovieRest, {\n        booleanLike: isLike,\n        nivAvis: oneMovie.Avis,\n        nivMoyenne: oneMovie.vote_average,\n        nbreVote: oneMovie.vote_count,\n        nameMovie: oneMovie.title.slice(0, 22) + \"...\",\n        affiche: 'https://image.tmdb.org/t/p/w500' + oneMovie.poster_path,\n        resume: oneMovie.overview.slice(0, 350) + \"...\",\n        like: clickSurLike\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(MovieRest, {\n        booleanLike: oneMovie.like,\n        nivAvis: oneMovie.Avis,\n        nivMoyenne: oneMovie.vote_average,\n        nbreVote: oneMovie.vote_count,\n        nameMovie: oneMovie.title,\n        affiche: 'https://image.tmdb.org/t/p/w500' + oneMovie.poster_path,\n        resume: oneMovie.overview.slice(0, 350) + \"...\",\n        like: clickSurLike\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 14\n      }, this);\n    }\n  }); ///////\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        className: \"header\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Nav, {\n            style: flex,\n            children: [/*#__PURE__*/_jsxDEV(NavItem, {\n              children: /*#__PURE__*/_jsxDEV(NavLink, {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"./pop-corn.png\",\n                  alt: \"\",\n                  style: icon\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 22\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(NavItem, {\n              children: /*#__PURE__*/_jsxDEV(NavLink, {\n                style: nav,\n                href: \"#\",\n                children: \"Connexion\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(NavItem, {\n              children: /*#__PURE__*/_jsxDEV(NavLink, {\n                style: nav,\n                href: \"#\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    id: \"Popover1\",\n                    type: \"button\",\n                    children: [\"Favoris : \", favListComp.length]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 7\n                  }, this), /*#__PURE__*/_jsxDEV(Popover, {\n                    placement: \"bottom\",\n                    isOpen: popoverOpen,\n                    target: \"Popover1\",\n                    toggle: toggle,\n                    children: [/*#__PURE__*/_jsxDEV(PopoverHeader, {\n                      children: \"Liste de Favoris\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 196,\n                      columnNumber: 9\n                    }, this), favListComp]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 7\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"cards\",\n        children: movieListFirst\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: movieListRest\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 177,\n    columnNumber: 3\n  }, this);\n}\n\n_s(App, \"1SzQ5qzau/GcAp3Z9lSKJKDu+DM=\");\n\n_c = App;\n;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/syl/Desktop/La Capsule/Semaine 5/mymoviesBackEnd/reactapp/src/App.js"],"names":["React","useState","useEffect","Container","Row","Col","Nav","NavItem","NavLink","Movie","MovieRest","Button","Popover","PopoverHeader","PopoverBody","icon","width","flex","display","flexDirection","alignItems","nav","fontSize","fontWeight","color","list","padding","App","movieListAPI","setMovieListAPI","wishList","setWishList","popoverOpen","setPopoverOpen","toggle","rawResponse","fetch","reponse","json","moviesAPI","results","response","movies","movieData","map","i","sort","a","b","vote_average","movieDataFirst","movieDataRest","filter","movie","idx","clickSurLike","nomDuFilm","afficheMovie","wishListExist","exist","Nom","indexOf","img","method","headers","body","e","removeWishList","name","favListComp","movielist","movieListFirst","oneMovie","isLike","nameMovie","title","length","Avis","vote_count","slice","poster_path","overview","islike","movieListRest","like"],"mappings":"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","sourcesContent":["\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport React, { useState, useEffect } from 'react';\n\nimport { Container, Row, Col } from 'reactstrap';\nimport { Nav, NavItem, NavLink } from 'reactstrap';\nimport {Movie} from '../src/Components/Movie';\nimport {MovieRest} from '../src/Components/MovieRest';\n\nimport { Button, Popover, PopoverHeader, PopoverBody} from 'reactstrap';\n\n\nvar icon = {\n  width : '52px',\n}\n\nvar flex = {\n  display: 'flex',\n  flexDirection: 'row',\n  alignItems: 'center',\n}\n\nvar nav = {\n  fontSize : '18px',\n  fontWeight : 'bold',\n  color : 'white'\n}\n\nvar list = {\n  fontSize : '18px',\n  padding : \"8px 10px\",\n}\n\n\n\n\nfunction App() {\n\n\n  const [movieListAPI, setMovieListAPI] = useState([]);\n  const [wishList, setWishList] = useState([])\n  const [popoverOpen, setPopoverOpen] = useState(false);\n  const toggle = () => setPopoverOpen(!popoverOpen);\n\n\n \n\n  useEffect(async () => {\n\n      var rawResponse = await fetch('/new-movies');\n      var reponse = await rawResponse.json();\n      setMovieListAPI(reponse.moviesAPI.results)\n\n      }, []);\n\n  \n  useEffect(async () => {\n      \n      var rawResponse = await fetch('/wishlist-movie');\n      var response = await rawResponse.json();\n      setWishList(response.movies)\n    \n    }, []);\n\nvar movieData = movieListAPI.map((list, i) => {\n          return list\n              })\n    \n\n// tri des films par popularité\n    movieData.sort(function(a, b) {\n          return b.vote_average - a.vote_average})\n////\n\n// sépare les films en 1,2,3 puis le reste\n  var movieDataFirst = [];\n  var movieDataRest = [];\n\n        movieDataFirst = movieData.filter((movie, idx) => idx < 3);\n        movieDataRest = movieData.filter((movie,idx) => idx > 3 )\n///\n\n///Ajout dans WishList\n        \nvar clickSurLike = async (nomDuFilm, afficheMovie) => {\n\n    var wishListExist = wishList.map((exist, i) => {\n        return exist.Nom})\n\n    if (wishListExist.indexOf(nomDuFilm)  === -1) {\n      setWishList( [...wishList, {Nom : nomDuFilm, img : afficheMovie}]) \n\n      await fetch('/wishlist-movie', {\n                method: 'POST',\n                headers: {'Content-Type':'application/x-www-form-urlencoded'},\n                body: 'name='+nomDuFilm+'&img='+afficheMovie})\n\n       } else if (wishListExist.indexOf(nomDuFilm)  !== -1) {\n      setWishList( wishList.filter((e) => e.Nom !== nomDuFilm))\n    \n          await fetch('/wishlist-movie/'+nomDuFilm, {\n                method: 'DELETE', }\n                )\n      }\n\n/*          var rawResponse = await fetch('/wishlist-movie');\n        var response = await rawResponse.json();\n        setWishList(response.movies) */\n      }\n\n//////\n\n// Suprresion depuis WIshList\n\nvar removeWishList = async (nomDuFilm) => {\n    \n    setWishList ( wishList.filter((e) => e.name !==nomDuFilm))\n          await fetch('/wishlist-movie/'+nomDuFilm, {\n          method: 'DELETE',\n       })\n          var rawResponse = await fetch('/wishlist-movie');\n       var response = await rawResponse.json();\n       setWishList(response.movies)\n    }\n\n///\n\n/// creation de la div WishList\n    \nvar favListComp = wishList.map((movielist, i) => {\n        return(<PopoverBody  className = \"wishList\" onClick={() => removeWishList(movielist.Nom)}><img className = \"wishListImage\" src = {movielist.img}></img>{movielist.Nom}</PopoverBody>)\n  })\n    \n//////\n\n/// recup etatLike\n\n\n\n\n////\n\n/// creation des Cards Movies123 et MoviesRest\n\nvar movieListFirst = movieDataFirst.map((oneMovie, i) => {\n\n  var wishListExist = wishList.map((exist, i) => {\n    return exist.Nom})\n  \n  var isLike = (wishListExist.indexOf(oneMovie.nameMovie))\n\n    if (oneMovie.title.length > 22){\n\n      return(<Movie booleanLike = {isLike} nivAvis = {oneMovie.Avis} nivMoyenne = {oneMovie.vote_average} nbreVote = {oneMovie.vote_count} nameMovie = {oneMovie.title.slice(0,22)+\"...\"} affiche = {'https://image.tmdb.org/t/p/w500'+oneMovie.poster_path} resume = {oneMovie.overview.slice(0,350)+\"...\"} like = {clickSurLike}/>);\n\n    } else {\n      return(<Movie booleanLike = {islike} nivAvis = {oneMovie.Avis} nivMoyenne = {oneMovie.vote_average} nbreVote = {oneMovie.vote_count} nameMovie = {oneMovie.title} affiche = {'https://image.tmdb.org/t/p/w500'+oneMovie.poster_path} resume = {oneMovie.overview.slice(0,350)+\"...\"} like = {clickSurLike}/>);\n    }\n\n  });\n\nvar movieListRest = movieDataRest.map((oneMovie, i) => {\n\n    if (oneMovie.title.length > 22){\n      return(<MovieRest booleanLike = {isLike} nivAvis = {oneMovie.Avis} nivMoyenne = {oneMovie.vote_average} nbreVote = {oneMovie.vote_count} nameMovie = {oneMovie.title.slice(0,22)+\"...\"} affiche = {'https://image.tmdb.org/t/p/w500'+oneMovie.poster_path} resume = {oneMovie.overview.slice(0,350)+\"...\"} like = {clickSurLike}/>);\n    \n    } else {\n      return(<MovieRest booleanLike = {oneMovie.like} nivAvis = {oneMovie.Avis} nivMoyenne = {oneMovie.vote_average} nbreVote = {oneMovie.vote_count} nameMovie = {oneMovie.title} affiche = {'https://image.tmdb.org/t/p/w500'+oneMovie.poster_path} resume = {oneMovie.overview.slice(0,350)+\"...\"} like = {clickSurLike}/>);\n    }\n\n  });\n  \n///////\n\nreturn (\n  <div className =\"App\">\n    <Container>\n      <Row className =\"header\">\n        <Col>\n        <Nav style={flex}>\n        <NavItem>\n          <NavLink  >< img src='./pop-corn.png' alt='' style={icon} /></NavLink>\n        </NavItem>\n        <NavItem>\n          <NavLink style={nav} href=\"#\">Connexion</NavLink>\n        </NavItem>\n        <NavItem>\n          <NavLink style={nav} href=\"#\">\n          \n          <div>\n      <Button id=\"Popover1\" type=\"button\">\n        Favoris : {favListComp.length}\n      </Button>\n      <Popover placement=\"bottom\" isOpen={popoverOpen} target=\"Popover1\" toggle={toggle}>\n        <PopoverHeader>Liste de Favoris</PopoverHeader>\n         {favListComp}\n      </Popover>\n          </div>\n          \n          </NavLink>\n        </NavItem>\n        </Nav>\n        </Col>\n      </Row>\n      \n      <Row className=\"cards\">\n          {movieListFirst}\n      </Row>\n      <Row>\n          {movieListRest}\n      </Row>\n      \n    </Container>\n  </div>\n  );\n};\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}