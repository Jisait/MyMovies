{"ast":null,"code":"import _toConsumableArray from\"/Users/syl/Documents/DevApp/mymoviesBackEnd/reactapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/syl/Documents/DevApp/mymoviesBackEnd/reactapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/syl/Documents/DevApp/mymoviesBackEnd/reactapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/syl/Documents/DevApp/mymoviesBackEnd/reactapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'bootstrap/dist/css/bootstrap.min.css';import'./App.css';import React,{useState,useEffect}from'react';import{Container,Row,Col}from'reactstrap';import{Nav,NavItem,NavLink}from'reactstrap';import{Movie}from'../src/Components/Movie';import{MovieRest}from'../src/Components/MovieRest';import{Button,Popover,PopoverHeader,PopoverBody}from'reactstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var icon={width:'52px'};var flex={display:'flex',flexDirection:'row',alignItems:'center'};var nav={fontSize:'18px',fontWeight:'bold',color:'white'};var list={fontSize:'18px',padding:\"8px 10px\"};function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movieListAPI=_useState2[0],setMovieListAPI=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),wishList=_useState4[0],setWishList=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),popoverOpen=_useState6[0],setPopoverOpen=_useState6[1];var toggle=function toggle(){return setPopoverOpen(!popoverOpen);};useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var rawResponse,reponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('/new-movies');case 2:rawResponse=_context.sent;_context.next=5;return rawResponse.json();case 5:reponse=_context.sent;setMovieListAPI(reponse.moviesAPI.results);case 7:case\"end\":return _context.stop();}}},_callee);})),[]);useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var rawResponse,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('/wishlist-movie');case 2:rawResponse=_context2.sent;_context2.next=5;return rawResponse.json();case 5:response=_context2.sent;setWishList(response.movies);case 7:case\"end\":return _context2.stop();}}},_callee2);})),[]);var movieData=movieListAPI.map(function(list,i){return list;});// tri des films par popularité\nmovieData.sort(function(a,b){return b.vote_average-a.vote_average;});////\n// sépare les films en 1,2,3 puis le reste\nvar movieDataFirst=[];var movieDataRest=[];movieDataFirst=movieData.filter(function(movie,idx){return idx<3;});movieDataRest=movieData.filter(function(movie,idx){return idx>3;});///\n///Ajout dans WishList\nvar clickSurLike=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(nomDuFilm,afficheMovie){var wishListExist;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:wishListExist=wishList.map(function(exist,i){return exist.Nom;});if(!(wishListExist.indexOf(nomDuFilm)===-1)){_context3.next=7;break;}setWishList([].concat(_toConsumableArray(wishList),[{Nom:nomDuFilm,img:afficheMovie}]));_context3.next=5;return fetch('/wishlist-movie',{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:'name='+nomDuFilm+'&img='+afficheMovie});case 5:_context3.next=11;break;case 7:if(!(wishListExist.indexOf(nomDuFilm)!==-1)){_context3.next=11;break;}setWishList(wishList.filter(function(e){return e.Nom!==nomDuFilm;}));_context3.next=11;return fetch('/wishlist-movie/'+nomDuFilm,{method:'DELETE'});case 11:case\"end\":return _context3.stop();}}},_callee3);}));return function clickSurLike(_x,_x2){return _ref3.apply(this,arguments);};}();//////\n// Suprresion depuis WIshList\nvar removeWishList=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(nomDuFilm){var rawResponse,response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:setWishList(wishList.filter(function(e){return e.name!==nomDuFilm;}));_context4.next=3;return fetch('/wishlist-movie/'+nomDuFilm,{method:'DELETE'});case 3:_context4.next=5;return fetch('/wishlist-movie');case 5:rawResponse=_context4.sent;_context4.next=8;return rawResponse.json();case 8:response=_context4.sent;setWishList(response.movies);case 10:case\"end\":return _context4.stop();}}},_callee4);}));return function removeWishList(_x3){return _ref4.apply(this,arguments);};}();///\n/// creation de la div WishList\nvar favListComp=wishList.map(function(movielist,i){return/*#__PURE__*/_jsxs(PopoverBody,{className:\"wishList\",onClick:function onClick(){return removeWishList(movielist.Nom);},children:[/*#__PURE__*/_jsx(\"img\",{className:\"wishListImage\",src:movielist.img}),movielist.Nom]});});//////\n/// recup etatLike\n////\n/// creation des Cards Movies123 et MoviesRest\nvar movieListFirst=movieDataFirst.map(function(oneMovie,i){var result=wishList.find(function(e){return e.Nom==oneMovie.title;});var isSee=false;if(result!=undefined){isSee=true;}if(oneMovie.title.length>22){return/*#__PURE__*/_jsx(Movie,{booleanLike:isSee,nivAvis:oneMovie.Avis,nivMoyenne:oneMovie.vote_average,nbreVote:oneMovie.vote_count,nameMovie:oneMovie.title.slice(0,22)+\"...\",affiche:'https://image.tmdb.org/t/p/w500'+oneMovie.poster_path,resume:oneMovie.overview.slice(0,350)+\"...\",like:clickSurLike});}else{return/*#__PURE__*/_jsx(Movie,{booleanLike:isSee,nivAvis:oneMovie.Avis,nivMoyenne:oneMovie.vote_average,nbreVote:oneMovie.vote_count,nameMovie:oneMovie.title,affiche:'https://image.tmdb.org/t/p/w500'+oneMovie.poster_path,resume:oneMovie.overview.slice(0,350)+\"...\",like:clickSurLike});}});var movieListRest=movieDataRest.map(function(oneMovie,i){var result=wishList.find(function(e){return e.Nom==oneMovie.title;});var isSee=false;if(result!=undefined){isSee=true;}if(oneMovie.title.length>22){return/*#__PURE__*/_jsx(MovieRest,{booleanLike:isSee,nivAvis:oneMovie.Avis,nivMoyenne:oneMovie.vote_average,nbreVote:oneMovie.vote_count,nameMovie:oneMovie.title.slice(0,22)+\"...\",affiche:'https://image.tmdb.org/t/p/w500'+oneMovie.poster_path,resume:oneMovie.overview.slice(0,350)+\"...\",like:clickSurLike});}else{return/*#__PURE__*/_jsx(MovieRest,{booleanLike:isSee,nivAvis:oneMovie.Avis,nivMoyenne:oneMovie.vote_average,nbreVote:oneMovie.vote_count,nameMovie:oneMovie.title,affiche:'https://image.tmdb.org/t/p/w500'+oneMovie.poster_path,resume:oneMovie.overview.slice(0,350)+\"...\",like:clickSurLike});}});///////\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Row,{className:\"header\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Nav,{style:flex,children:[/*#__PURE__*/_jsx(NavItem,{children:/*#__PURE__*/_jsx(NavLink,{children:/*#__PURE__*/_jsx(\"img\",{src:\"./pop-corn.png\",alt:\"\",style:icon})})}),/*#__PURE__*/_jsx(NavItem,{children:/*#__PURE__*/_jsx(NavLink,{style:nav,href:\"#\",children:\"Connexion\"})}),/*#__PURE__*/_jsx(NavItem,{children:/*#__PURE__*/_jsx(NavLink,{style:nav,href:\"#\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Button,{id:\"Popover1\",type:\"button\",children:[\"Favoris : \",favListComp.length]}),/*#__PURE__*/_jsxs(Popover,{placement:\"bottom\",isOpen:popoverOpen,target:\"Popover1\",toggle:toggle,children:[/*#__PURE__*/_jsx(PopoverHeader,{children:\"Liste de Favoris\"}),favListComp]})]})})})]})})}),/*#__PURE__*/_jsx(Row,{className:\"cards\",children:movieListFirst}),/*#__PURE__*/_jsx(Row,{children:movieListRest})]})});};export default App;","map":{"version":3,"sources":["/Users/syl/Documents/DevApp/mymoviesBackEnd/reactapp/src/App.js"],"names":["React","useState","useEffect","Container","Row","Col","Nav","NavItem","NavLink","Movie","MovieRest","Button","Popover","PopoverHeader","PopoverBody","icon","width","flex","display","flexDirection","alignItems","nav","fontSize","fontWeight","color","list","padding","App","movieListAPI","setMovieListAPI","wishList","setWishList","popoverOpen","setPopoverOpen","toggle","fetch","rawResponse","json","reponse","moviesAPI","results","response","movies","movieData","map","i","sort","a","b","vote_average","movieDataFirst","movieDataRest","filter","movie","idx","clickSurLike","nomDuFilm","afficheMovie","wishListExist","exist","Nom","indexOf","img","method","headers","body","e","removeWishList","name","favListComp","movielist","movieListFirst","oneMovie","result","find","title","isSee","undefined","length","Avis","vote_count","slice","poster_path","overview","movieListRest"],"mappings":"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","sourcesContent":["\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport React, { useState, useEffect } from 'react';\n\nimport { Container, Row, Col } from 'reactstrap';\nimport { Nav, NavItem, NavLink } from 'reactstrap';\nimport {Movie} from '../src/Components/Movie';\nimport {MovieRest} from '../src/Components/MovieRest';\n\nimport { Button, Popover, PopoverHeader, PopoverBody} from 'reactstrap';\n\n\nvar icon = {\n  width : '52px',\n}\n\nvar flex = {\n  display: 'flex',\n  flexDirection: 'row',\n  alignItems: 'center',\n}\n\nvar nav = {\n  fontSize : '18px',\n  fontWeight : 'bold',\n  color : 'white'\n}\n\nvar list = {\n  fontSize : '18px',\n  padding : \"8px 10px\",\n}\n\n\n\n\nfunction App() {\n\n\n  const [movieListAPI, setMovieListAPI] = useState([]);\n  const [wishList, setWishList] = useState([])\n  const [popoverOpen, setPopoverOpen] = useState(false);\n  const toggle = () => setPopoverOpen(!popoverOpen);\n\n\n \n\n  useEffect(async () => {\n\n      var rawResponse = await fetch('/new-movies');\n      var reponse = await rawResponse.json();\n      setMovieListAPI(reponse.moviesAPI.results)\n\n      }, []);\n\n  \n  useEffect(async () => {\n      \n      var rawResponse = await fetch('/wishlist-movie');\n      var response = await rawResponse.json();\n      setWishList(response.movies)\n    \n    }, []);\n\nvar movieData = movieListAPI.map((list, i) => {\n          return list\n              })\n    \n\n// tri des films par popularité\n    movieData.sort(function(a, b) {\n          return b.vote_average - a.vote_average})\n////\n\n// sépare les films en 1,2,3 puis le reste\n  var movieDataFirst = [];\n  var movieDataRest = [];\n\n        movieDataFirst = movieData.filter((movie, idx) => idx < 3);\n        movieDataRest = movieData.filter((movie,idx) => idx > 3 )\n///\n\n///Ajout dans WishList\n        \nvar clickSurLike = async (nomDuFilm, afficheMovie) => {\n\n    var wishListExist = wishList.map((exist, i) => {\n        return exist.Nom})\n\n    if (wishListExist.indexOf(nomDuFilm)  === -1) {\n      setWishList( [...wishList, {Nom : nomDuFilm, img : afficheMovie}]) \n\n      await fetch('/wishlist-movie', {\n                method: 'POST',\n                headers: {'Content-Type':'application/x-www-form-urlencoded'},\n                body: 'name='+nomDuFilm+'&img='+afficheMovie})\n\n       } else if (wishListExist.indexOf(nomDuFilm)  !== -1) {\n      setWishList( wishList.filter((e) => e.Nom !== nomDuFilm))\n    \n          await fetch('/wishlist-movie/'+nomDuFilm, {\n                method: 'DELETE', }\n                )\n      }\n\n/*          var rawResponse = await fetch('/wishlist-movie');\n        var response = await rawResponse.json();\n        setWishList(response.movies) */\n      }\n\n//////\n\n// Suprresion depuis WIshList\n\nvar removeWishList = async (nomDuFilm) => {\n    \n    setWishList ( wishList.filter((e) => e.name !==nomDuFilm))\n          await fetch('/wishlist-movie/'+nomDuFilm, {\n          method: 'DELETE',\n       })\n          var rawResponse = await fetch('/wishlist-movie');\n       var response = await rawResponse.json();\n       setWishList(response.movies)\n    }\n\n///\n\n/// creation de la div WishList\n    \nvar favListComp = wishList.map((movielist, i) => {\n        return(<PopoverBody  className = \"wishList\" onClick={() => removeWishList(movielist.Nom)}><img className = \"wishListImage\" src = {movielist.img}></img>{movielist.Nom}</PopoverBody>)\n  })\n    \n//////\n\n/// recup etatLike\n\n\n\n\n////\n\n/// creation des Cards Movies123 et MoviesRest\n\nvar movieListFirst = movieDataFirst.map((oneMovie, i) => {\n\n  var result = wishList.find(e => e.Nom == oneMovie.title)\n\n  var isSee = false\n  if (result != undefined) {\n    isSee = true\n  }\n\n    if (oneMovie.title.length > 22){\n\n      return(<Movie booleanLike = {isSee} nivAvis = {oneMovie.Avis} nivMoyenne = {oneMovie.vote_average} nbreVote = {oneMovie.vote_count} nameMovie = {oneMovie.title.slice(0,22)+\"...\"} affiche = {'https://image.tmdb.org/t/p/w500'+oneMovie.poster_path} resume = {oneMovie.overview.slice(0,350)+\"...\"} like = {clickSurLike}/>);\n\n    } else {\n      return(<Movie booleanLike = {isSee} nivAvis = {oneMovie.Avis} nivMoyenne = {oneMovie.vote_average} nbreVote = {oneMovie.vote_count} nameMovie = {oneMovie.title} affiche = {'https://image.tmdb.org/t/p/w500'+oneMovie.poster_path} resume = {oneMovie.overview.slice(0,350)+\"...\"} like = {clickSurLike}/>);\n    }\n\n  });\n\nvar movieListRest = movieDataRest.map((oneMovie, i) => {\n\n  var result = wishList.find(e => e.Nom == oneMovie.title)\n\n  var isSee = false\n  if (result != undefined) {\n    isSee = true\n  }\n\n\n    if (oneMovie.title.length > 22){\n      return(<MovieRest booleanLike = {isSee} nivAvis = {oneMovie.Avis} nivMoyenne = {oneMovie.vote_average} nbreVote = {oneMovie.vote_count} nameMovie = {oneMovie.title.slice(0,22)+\"...\"} affiche = {'https://image.tmdb.org/t/p/w500'+oneMovie.poster_path} resume = {oneMovie.overview.slice(0,350)+\"...\"} like = {clickSurLike}/>);\n    \n    } else {\n      return(<MovieRest booleanLike = {isSee} nivAvis = {oneMovie.Avis} nivMoyenne = {oneMovie.vote_average} nbreVote = {oneMovie.vote_count} nameMovie = {oneMovie.title} affiche = {'https://image.tmdb.org/t/p/w500'+oneMovie.poster_path} resume = {oneMovie.overview.slice(0,350)+\"...\"} like = {clickSurLike}/>);\n    }\n\n  });\n  \n///////\n\nreturn (\n  <div className =\"App\">\n    <Container>\n      <Row className =\"header\">\n        <Col>\n        <Nav style={flex}>\n        <NavItem>\n          <NavLink  >< img src='./pop-corn.png' alt='' style={icon} /></NavLink>\n        </NavItem>\n        <NavItem>\n          <NavLink style={nav} href=\"#\">Connexion</NavLink>\n        </NavItem>\n        <NavItem>\n          <NavLink style={nav} href=\"#\">\n          \n          <div>\n      <Button id=\"Popover1\" type=\"button\">\n        Favoris : {favListComp.length}\n      </Button>\n      <Popover placement=\"bottom\" isOpen={popoverOpen} target=\"Popover1\" toggle={toggle}>\n        <PopoverHeader>Liste de Favoris</PopoverHeader>\n         {favListComp}\n      </Popover>\n          </div>\n          \n          </NavLink>\n        </NavItem>\n        </Nav>\n        </Col>\n      </Row>\n      \n      <Row className=\"cards\">\n          {movieListFirst}\n      </Row>\n      <Row>\n          {movieListRest}\n      </Row>\n      \n    </Container>\n  </div>\n  );\n};\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}